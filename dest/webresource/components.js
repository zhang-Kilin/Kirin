define("components",function(){}),define("jsx.UILayer",["react"],function(t){var e=t.createClass({displayName:"UILayer",getDefaultProps:function(){return{fade:!0,onshow:function(){},onhide:function(){}}},getInitialState:function(){return{show:!1,fade:!1,"in":!1,marginTop:0,marginLeft:0}},componentWillMount:function(){$(window).on("resize",$.proxy(this.resize,this))},componentWillUnmount:function(){$(window).off("resize",$.proxy(this.resize,this))},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(t,n){this.state.show&&!n.show?this.resize():this.state.show&&(this.props.fade&&!this.state.fade?(this.setState({fade:!0}),setTimeout($.proxy(function(){this.setState({"in":!0}),this.props.onshow&&this.props.onshow()},this),e.TRANSACTION_DURATION)):this.props.fade||this.state["in"]||(this.setState({"in":!0}),this.props.onshow&&this.props.onshow()))},render:function(){var e="layer"+(this.state.fade?" fade":""),e=e+(this.state.show?"":" hide"),e=e+(this.state["in"]?" in":""),n={marginTop:this.state.marginTop,marginLeft:this.state.marginLeft};return t.createElement("div",{className:e,style:n},this.props.children)},show:function(){this.state.show||this.setState({show:!0})},hide:function(){this.props.fade?(this.setState({"in":!1}),setTimeout($.proxy(function(){this.setState({show:!1,fade:!1}),this.props.onhide&&this.props.onhide()},this),e.TRANSACTION_DURATION)):(this.setState({"in":!1,show:!1,fade:!1}),this.props.onhide&&this.props.onhide())},resize:function(){if(this.state.show){var t=this.getDOMNode(),e=$(t).width(),n=$(t).height();this.setState({marginTop:-n/2+"px",marginLeft:-e/2+"px"})}}});return e.TRANSACTION_DURATION=250,e}),define("jsx.UILayerList",["react"],function(t){var e=t.createClass({displayName:"UILayerList",getDefaultProps:function(){return{fade:!0,onshow:function(){},onhide:function(){}}},getInitialState:function(){return{show:!1,fade:!1,"in":!1}},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(){},render:function(){var e="layerlist"+(this.state.fade?" fade":""),e=e+(this.state.show?"":" hide"),e=e+(this.state["in"]?" in":"");return t.createElement("div",{className:e},this.props.children)},hide:function(){this.props.fade?(this.setState({"in":!1}),setTimeout($.proxy(function(){this.setState({show:!1,fade:!1}),this.props.onhide&&this.props.onhide()},this),e.TRANSACTION_DURATION)):(this.setState({show:!1,"in":!1,fade:!1}),this.props.onhide&&this.props.onhide())},show:function(){this.props.fade?(this.setState({fade:!0,show:!0}),setTimeout($.proxy(function(){this.setState({"in":!0}),this.props.onshow&&this.props.onshow()},this),e.TRANSACTION_DURATION)):(this.setState({"in":!0,show:!0}),this.props.onshow&&this.props.onshow())}});return e.TRANSACTION_DURATION=250,e}),define("jsx.UIToolbars",["react"],function(t){function e(e){return t.createClass({getDefaultProps:function(){return _.extend({},a,e)},render:function(){return this.props.isMoreMenu?this.createMoremenu():this.createButton()},createButton:function(){return t.createElement("a",{href:"javascript:;",className:"btn btn-info tool tool-btn",title:this.props.text,onClick:this.props.handle},t.createElement("i",{className:"glyphicon glyphicon-"+this.props.icon}))},createMoremenu:function(){return t.createElement("a",{href:"javascript:;",className:"btn btn-default",onClick:this.props.handle},t.createElement("i",{className:"glyphicon glyphicon-"+this.props.icon}),this.props.text)}})}var n={},a={handle:function(){},isMoreMenu:!1},i={home:{alias:["home"],icon:"home",text:"首页"},earphone:{alias:["phone","earphone"],icon:"earphone",text:"联系我们"},share:{alias:["share"],icon:"share",text:"分享"},edit:{alias:["edit"],icon:"edit",text:"编辑"},"log-in":{alias:["login","log-in"],icon:"log-in",text:"登录"},"log-out":{alias:["logout","log-out"],icon:"log-out",text:"注销"},cog:{alias:["setting","cog"],icon:"cog",text:"设置"},refresh:{alias:["refresh"],icon:"refresh",text:"刷新"},user:{alias:["user"],icon:"user",text:"用户中心"},trash:{alias:["delete","trash","remove","del"],icon:"trash",text:"删除"},barcode:{alias:["barcode"],icon:"barcode",text:"扫码"},qrcode:{alias:["qrcode"],icon:"qrcode",text:"扫码"},heart:{alias:["heart"],icon:"heart",text:"赞一个"},search:{alias:["search"],icon:"search",text:"搜索"},"star-empty":{alias:["favorite","star-empty"],icon:"star-empty",text:"收藏"},print:{alias:["print"],icon:"print",text:"打印"},envelope:{alias:["envelope","message","msg","email","mail"],icon:"envelope",text:"信息"},plus:{alias:["plus","new","add"],icon:"plus",text:"新建"},calendar:{alias:["calendar"],icon:"calendar",text:"日历"}};return _.each(i,function(t,a){n[a]=e(t)}),n.moreMenuContainer=t.createClass({displayName:"moreMenuContainer",getDefaultProps:function(){return{}},getInitialState:function(){return{show:!1}},documentClickHandle:function(){this.setState({show:!1})},componentDidMount:function(){$(document).on("click",$.proxy(this.documentClickHandle,this)),$(this.getDOMNode()).find(".tool-btn").on("click",$.proxy(this.handle,this))},componentWillUnmount:function(){$(document).off("click",$.proxy(this.documentClickHandle,this))},handle:function(t){return this.setState({show:!this.state.show}),t.preventDefault(),t.stopPropagation(),!1},stopPropagation:function(t){return t.preventDefault(),t.stopPropagation(),!1},render:function(){return t.createElement("div",{className:"moremenu-container"},t.createElement("a",{href:"javascript:;",className:"btn btn-info tool tool-btn"},t.createElement("i",{className:"glyphicon glyphicon-option-vertical"})),t.createElement("div",{className:"moremenu"+(this.state.show?"":" hide")},t.createElement("div",{className:"icon"},t.createElement("i",{className:"glyphicon glyphicon-triangle-top"})),t.createElement("div",{className:"btn-group-vertical"},this.props.children)))}}),_.extend(n,{isReactElement:function(t){return t&&"symbol"==typeof t.$$typeof&&/react.element/i.test(t.$$typeof.toString())},setting:function(t){t&&(_.has(t,"length")?_.each(t,$.proxy(function(t){this.setting(t)},this)):t.icon&&(i[t.icon]=_.extend({},i[t.icon],t),i[t.icon].alias=i[t.icon].alias||[t.icon],n[t.icon]=e(i[t.icon])))},create:function(a){var s,r=a.icon;if(!_.has(i,r)){if(s=_.find(i,function(t){return _.indexOf(t.alias,r)>=0}),!s)return t.createElement(e(a));a.icon=s.icon}return t.createElement(n[a.icon],t.__spread({},a))},createMenuList:function(e){var a=[];return _.each(e,$.proxy(function(t){this.isReactElement(t)?a.push(t):(t.isMoreMenu=!0,t=this.create(t),t&&a.push(t))},this)),t.createElement(n.moreMenuContainer,null,a)}})}),define("jsx.UIHeader",["react","jsx.UIToolbars"],function(t,e){var n={getDefaultProps:function(){return{onshow:null,onhide:null,title:"",toolbar:null,handles:{onback:function(){},onhome:function(){}}}},getInitialState:function(){return{show:!0}},componentDidUpdate:function(t,e){var n="";e.show!=this.state.show&&(n=this.state.show?"onshow":"onhide"),n&&this.props[n]&&this.props[n]()},render:function(){var e=this.state.show?"":"hide";return e="header "+e,t.createElement("div",{className:e},t.createElement("header",null,this.createBack(),this.createToolbarContainer(),this.createTitleContainer(),t.createElement("div",{className:"clearfix"})))},isReactElement:function(t){return t&&"symbol"==typeof t.$$typeof&&/react.element/i.test(t.$$typeof.toString())},createBack:function(){return t.createElement("a",{href:"javascript:;",className:"btn btn-info tool tool-back",onClick:this.props.handles.onback},t.createElement("i",{className:"glyphicon glyphicon-menu-left"}))},createTitleContainer:function(){return t.createElement("h3",{className:"center-block"},this.props.title)},createToolbarContainer:function(){return t.createElement("div",{className:"tool tool-bar"},this.createToolbar())},formatToolbarParams:function(t){var e,n=[];return t?("string"==typeof t?n=n.concat(this.formatToolbarParams({icon:t})):this.isReactElement(t)?n.push(t):_.isArray(t)?_.each(t,$.proxy(function(t){n=n.concat(this.formatToolbarParams(t))},this)):"[object Object]"===Object.prototype.toString.call(t)&&(e=t.icon,t.hasOwnProperty("handle")||(t.handle=this.props.handles["on"+e]),n.push(t)),n):n},createToolbar:function(){var t,n=[],a=this.formatToolbarParams(this.props.toolbar),i=[],s=[],r=3;for(_.each(a,$.proxy(function(t){t.isMoreMenu?i.push(t):s.push(t)},this)),(i.length||s.length>r)&&(r=2);s.length>r;)t=s.pop(),t.isMoreMenu=!0,i=[t].concat(i);return _.each(s,$.proxy(function(t){n.push(this.isReactElement(toolbar)?t:e.create(t))},this)),i.length&&n.push(e.createMenuList(i)),n},show:function(){this.state.show||this.setState({show:!0})},hide:function(){this.state.show&&this.setState({show:!1})}};return t.createClass(n)}),define("jsx.UILoading",["react"],function(t){var e=t.createClass({displayName:"UILoading",getDefaultProps:function(){return{children:"数据加载中"}},getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return t.createElement("div",{className:"layer-container loading"},t.createElement("div",{className:"spinner"},t.createElement("div",{className:"spinner-container container1"},t.createElement("div",{className:"circle1"}),t.createElement("div",{className:"circle2"}),t.createElement("div",{className:"circle3"}),t.createElement("div",{className:"circle4"})),t.createElement("div",{className:"spinner-container container2"},t.createElement("div",{className:"circle1"}),t.createElement("div",{className:"circle2"}),t.createElement("div",{className:"circle3"}),t.createElement("div",{className:"circle4"})),t.createElement("div",{className:"spinner-container container3"},t.createElement("div",{className:"circle1"}),t.createElement("div",{className:"circle2"}),t.createElement("div",{className:"circle3"}),t.createElement("div",{className:"circle4"}))),t.createElement("div",{className:"content text-muted"},t.createElement("small",null,this.props.children)))}});return e}),define("jsx.UIBackdrop",["react"],function(t){var e=t.createClass({displayName:"UIBackdrop",getDefaultProps:function(){return{fade:!0,click:function(){}}},getInitialState:function(){return{"in":!1,show:!1,fade:!1}},componentDidMount:function(){this.props.show&&this.show()},componentDidUpdate:function(){},render:function(){var e="modal-backdrop"+(this.state.fade?" fade":""),e=e+(this.state["in"]?" in":""),n=this.state.show?"block":"none";return t.createElement("div",{className:e,style:{display:n},onClick:this.handleClick})},handleClick:function(){_.isFunction(this.props.click)&&this.props.click()},show:function(){this.props.fade?(this.setState({show:!0,fade:!0}),setTimeout($.proxy(function(){this.setState({"in":!0})},this),e.TRANSACTION_DURATION)):this.setState({show:!0,"in":!0})},hide:function(){this.props.fade?(this.setState({"in":!1}),setTimeout($.proxy(function(){this.setState({show:!1})},this),e.TRANSACTION_DURATION)):this.setState({show:!1,"in":!1,fade:!1})}});return e.TRANSACTION_DURATION=150,e}),define("jsx.UIModal",["react"],function(t){return t.createClass({getDefaultProps:function(){return{title:"",buttons:[{text:"确定",handle:function(){}},{text:"取消",handle:function(){}}]}},getInitialState:function(){return{}},render:function(){return t.createElement("div",{className:"layer-container ui-modal"},this.createHeader(),t.createElement("div",{className:"moadal-body"},this.props.children),this.createFooter())},createHeader:function(){return this.props.title?t.createElement("div",{className:"modal-header"},t.createElement("h4",null,this.props.title)):void 0},createFooter:function(){return this.props.buttons&&this.props.buttons.length?t.createElement("div",{className:"modal-footer"},t.createElement("div",{className:"btn-group btn-group-justified"},this.createButtons())):void 0},createButtons:function(){return _.map(this.props.buttons,function(e){return t.createElement("a",{href:"javascript:;",className:"btn btn-default",onClick:e.handle},e.text)})}})}),define("jsx.UIToast",["react"],function(t){return t.createClass({getDefaultProps:function(){return{}},getInitialState:function(){return{}},render:function(){return t.createElement("div",{className:"toast layer-container"},t.createElement("div",{className:"moadal-body"},this.props.children))}})}),define("jsx.UIList",["react","jsx.UILayerList"],function(t){var e=t.createClass({displayName:"UIList",getDefaultProps:function(){return{onselect:function(){},oncancel:function(){}}},render:function(){return t.createElement("div",{className:"list"},t.createElement("div",{className:"btn-group-vertical",onClick:this.selectHandle},this.createItems()),t.createElement("div",{className:"layerlist-footer btn-group btn-group-justified",onClick:this.cancelHandle},t.createElement("a",{href:"javascript:;",className:"btn btn-lg btn-warning"},"取消")))},cancelHandle:function(){_.isFunction(this.props.oncancel)&&this.props.oncancel()},selectHandle:function(t){var e=$(t.target).attr("data-index");e&&(e=parseInt(e),_.isFunction(this.props.onselect)&&this.props.onselect(this.props.children[e]))},createItems:function(){var e=[];return this.props.children&&this.props.children.length&&_.each(this.props.children,function(n,a){e.push(t.createElement("a",{href:"javascript:;","data-index":a,className:"btn btn-lg btn-default"},"string"==typeof n?n:n.text))}),e}});return e}),define("jsx.UISelect",["react"],function(React){var UISelect=React.createClass({displayName:"UISelect",getDefaultProps:function(){return{onchange:function(){}}},getInitialState:function(){return{children:null,selectedIndex:0,marginTop:0,events:null}},componentWillMount:function(){this.formatParameters(this.props);var touchStart="ontouchstart"in document?"onTouchStart":"onMouseDown",touchMove="ontouchmove"in document?"onTouchMove":"onMouseMove",touchEnd="ontouchend"in document?"onTouchEnd":"onMouseUp",touchCancel="ontouchcancel"in document?"onTouchCancel":"onMouseLeave",e=eval("({"+touchStart+":this.ontouchstart,"+touchMove+":this.ontouchmove,"+touchEnd+":this.ontouchend,"+touchCancel+":this.ontouchend})");this.setState({events:e})},componentWillReceiveProps:function(t){this.formatParameters(t)},render:function(){return React.createElement("div",React.__spread({className:"select"},this.state.events),React.createElement("ul",{style:{marginTop:this.state.marginTop+"px"}},this.createItems()),React.createElement("div",{className:"mask"}),React.createElement("div",{className:"line"}))},formatParameters:function(t){var e=null,n=!1,a=0;t&&t.children&&(e=[],_.each(t.children,function(t,i){e.push(_.extend({},t)),t.selected&&!n&&(n=!0,a=i)}),!n&&e.length>0&&(e[0].selected=!0),this.maxMarginTop=0,this.minMarginTop=-44*(e.length-1),this.setState({children:e,selectedIndex:a,marginTop:-44*a}))},createItems:function(){var t=[];return this.state.children&&_.each(this.state.children,$.proxy(function(e){t.push(React.createElement("li",{className:e.selected?"current":""},e.text))},this)),t},ontouchstart:function(t){this.touch="start";var e=t.touches?t.touches[0]:t;return this.startClientY=e.pageY,t.stopPropagation(),t.preventDefault(),!1},ontouchmove:function(t){if("start"===this.touch){var e=t.touches?t.touches[0]:t,n=e.pageY-this.startClientY,a=this.state.marginTop+n;a=a>this.maxMarginTop?this.maxMarginTop:a,a=a<this.minMarginTop?this.minMarginTop:a,this.startClientY=e.pageY,this.setState({marginTop:a})}return t.stopPropagation(),t.preventDefault(),!1},ontouchend:function(t){if("end"===this.touch)return!1;this.touch="end";var e,n=this.state.marginTop,a=Math.round(Math.abs(n)/44),i=a!=this.state.selectedIndex,s=-44*a,r={};return i&&(e=_.find(this.state.children,function(t){return t.selected}),e&&delete e.selected,this.state.children[a].selected=!0,r={selectedIndex:a,children:this.state.children},setTimeout($.proxy(function(){e=_.extend({},this.props.children[a]),_.isFunction(this.props.onchange)&&this.props.onchange(e,this.state.children,this.props)},this),0)),n!=s&&(r.marginTop=s),this.setState(r),t.stopPropagation(),t.preventDefault(),!1},value:function(){return this.props.children[this.state.selectedIndex]}});return UISelect.TRANSACTION_DURATION=150,UISelect}),define("jsx.UISelectGroup",["react","jsx.UISelect"],function(t,e){var n=t.createClass({displayName:"UISelectGroup",getDefaultProps:function(){return{toolbar:!0,onchange:function(){},oncancel:function(){},onitemchange:function(){}}},getInitialState:function(){return{}},componentDidMount:function(){},componentWillReceiveProps:function(){},render:function(){return t.createElement("div",{className:"select-group"},this.createToolbar(),this.createBody())},createToolbar:function(){return this.props.toolbar?t.createElement("div",{className:"toolbar"},t.createElement("a",{href:"javascript:;",className:"btn btn-warning btn-sm",onClick:this.ok},"确定"),t.createElement("a",{href:"javascript:;",className:"btn btn-default btn-sm",onClick:this.cancel},"取消")):void 0},createBody:function(){return t.createElement("div",{className:"body"},this.createItems())},createItems:function(){var n=[];return this.props.children&&_.each(this.props.children,$.proxy(function(a,i){this.results=this.results||{},this.results[i]=this.findDefaultResult(a),n.push(t.createElement("div",{className:"cell"},t.createElement(e,{name:i,onchange:this.onitemchange},a)))},this)),n},findDefaultResult:function(t){var e=null;return e=_.find(t,function(t){return t.selected}),!e&&t.length>0&&(e=t[0]),e&&(e=_.extend({},e)),e},cancel:function(){_.isFunction(this.props.oncancel)&&this.props.oncancel()},ok:function(){_.isFunction(this.props.onchange)&&this.props.onchange(this.results,this.itemsResults,this.props)},onitemchange:function(t,e,n){this.itemsResults=this.itemsResults||{},this.itemsResults[n.name]=e,this.results[n.name]=t,_.isFunction(this.props.onitemchange)&&this.props.onitemchange(t,n.name,e,n)},value:function(){return this.results}});return n}),define("jsx.UICalendar",["react","react-dom"],function(t,e){var n=t.createClass({displayName:"Calendar",getDefaultProps:function(){return{date:new Date,currentDate:new Date,className:"",hasHeader:!0,hasToolbar:!0,hasBody:!0,header:{},body:{},toolbar:{}}},DEFAULTS:{header:{format:null},body:{fill:!0,renderItem:null,createDates:null,itemFormat:null,select:null,disabled:[],weeks:[{text:"日",value:0,className:"text-danger bg-danger"},{text:"一",value:1},{text:"二",value:2},{text:"三",value:3},{text:"四",value:4},{text:"五",value:5},{text:"六",value:6,className:"text-danger bg-danger"}]},toolbar:{format:function(t,e){return e},years:[1900,2050],hasToday:!0,todayText:"返回今日"}},getInitialState:function(){return{}},componentWillMount:function(){this.setState({date:this.props.date,currentDate:this.props.currentDate})},componentDidMount:function(){},componentDidUpdate:function(){},componentWillReceiveProps:function(t){this.setState({date:t.date,currentDate:t.currentDate})},render:function(){var e="container calendar "+(this.props.className||""),n={date:this.state.date,currentDate:this.state.currentDate,calendar:this};return t.createElement("div",{className:e},this.renderHeader(n),this.renderToolbar(n),this.renderBody(n))},renderHeader:function(e){return this.props.hasHeader?(e=_.extend({},this.DEFAULTS.header,this.props.header,e),t.createElement(n.Header,t.__spread({},e,{ref:"Header"}))):void 0},renderToolbar:function(e){return this.props.hasToolbar?(e=_.extend({},this.DEFAULTS.toolbar,this.props.toolbar,e),t.createElement(n.Toolbar,t.__spread({},e,{ref:"Toolbar"}))):void 0},renderBody:function(e){return this.props.hasBody?(e=_.extend({},this.DEFAULTS.body,this.props.body,e),t.createElement(n.Body,t.__spread({},e,{ref:"Body"}))):void 0}});return n.Header=t.createClass({displayName:"Header",getDefaultProps:function(){return{}},getInitialState:function(){return{}},componentWillMount:function(){this.initParams(this.props)},componentWillReceiveProps:function(t){this.initParams(t)},initParams:function(t){this.setState({date:t.date,currentDate:t.currentDate})},render:function(){return t.createElement("div",{className:"calendar-header"},t.createElement("h4",null,this.currentDate()))},currentDate:function(){if(_.isFunction(this.props.format))return this.props.format.call(this,this.state.date);var t=this.state.date.getFullYear(),e=this.state.date.getMonth()+1;return t+" 年 "+e+" 月 "}}),n.Body=t.createClass({displayName:"Body",getInitialState:function(){return{selected:null}},getDefaultProps:function(){return{fill:!0,weeks:null,renderItem:null,select:null,createDates:null,itemFormat:null,disabled:[]}},componentWillMount:function(){this.initParams(this.props),this._data=this.createDates(this.props.date)},componentWillReceiveProps:function(t){this.initParams(t)},componentWillUpdate:function(t,e){var n=e.date,a=this.state.date;(n.getFullYear()!=a.getFullYear()||n.getMonth()!=a.getMonth())&&(this._data=this.createDates(n))},shouldComponentUpdate:function(t,e){var n=this.state.currentDate,a=e.currentDate,i=this.state.date;return nextDate=e.date,curDiff=!1,dateDiff=!1,n!=a&&(curDiff=n&&a?n.getFullYear()!=a.getFullYear()||n.getMonth()!=a.getMonth()||n.getDate()!=a.getDate():!0),dateDiff=i.getFullYear()!=nextDate.getFullYear()||i.getMonth()!=nextDate.getMonth(),dateDiff||(i=this.props.date,nextDate=t.date,dateDiff=i.getFullYear()!=nextDate.getFullYear()||i.getMonth()!=nextDate.getMonth()),curDiff||dateDiff},render:function(){return t.createElement("div",{className:"calendar-body",onClick:this._cellClick},this.createHeader(),this.createItems())},initParams:function(t){this.setState({date:t.date,currentDate:t.currentDate,disabled:this.initDisabledRange(t.disabled)})},initDisabledRange:function(t){function e(t){return t?("string"==typeof t?t=new Date(t.replace("-","/")):_.has(t,"year")&&_.has(t,"month")&&_.has(t,"day")&&(t=new Date(t.year,t.month-1,t.day)),t instanceof Date?t:null):t}var n,a,i=null;return t&&(i=_.map(t,function(t){return n=e(t[0]),a=e(t[1]),[n,a]})),i},createDates:function(t){if(_.isFunction(this.props.createDates))return this.props.createDates(t);if(this.props.fill)return this.craeteFillDates(t);t=new Date(t.getFullYear(),t.getMonth(),1);for(var e,n=[],a=t.getFullYear(),i=t.getMonth()+1,s=t.getDay(),r=this.getMaxDays(a,i),o=s;o--;)n[o]=null;for(o=1,o=1;r>=o;o++)e={year:a,month:i,day:o},_.isFunction(this.props.itemFormat)&&(e=this.props.itemFormat(e)),n.push(e);return n},craeteFillDates:function(t){t=new Date(t.getFullYear(),t.getMonth(),1);var e,n,a,i,s=[],r=t.getFullYear(),o=t.getMonth()+1,c=t.getDay(),h=this.getMaxDays(r,o),l=c;for(c=0==c?7:c,n=6,i=7*n-c,i=h>i?i+7:i,l=1-c;i>=l;)0>=l?(a||(a=new Date(t.setDate(-c)),a={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}),a.day++,e=_.extend({},a)):e=l>h?{year:12==o?r+1:r,month:12==o?1:o+1,day:l-h}:{year:r,month:o,day:l},_.isFunction(this.props.itemFormat)&&(e=this.props.itemFormat(e)),s.push(e),l++;return s},getMaxDays:function(t,e){switch(e){case 2:return t%100!=0&&t%4==0||t%400==0?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},createHeader:function(){if(this.props.weeks){var e=_.map(this.props.weeks,function(e){return"string"==typeof e?t.createElement("span",{className:"place"},e):t.createElement("span",{className:"place "+(e.className||"")},e.text)});return t.createElement("div",{className:"btn-group-justified calendar-body-header"},e)}},createItems:function(){for(var e,n,a,i=[],s=this._data,r=0;r<s.length;){for(e=[],a=r+7;a>r;r++)n=s[r],n&&(n=this.formatRangeDisabled(n)),e.push(this.oncreateitem(n));i.push(t.createElement("div",{className:"btn-group-justified"},e))}return i},_cellClick:function(t){for(var e,n,a,i=t.target;i&&!(e=$(i).attr("data-date"));)i=i.parentNode;e&&!$(i).attr("disabled")&&(n=new Date(e.replace(/\-/g,"/")),a=_.find(this._data,$.proxy(function(t){return this.diff(t,n)},this)),this.onselect.call(this,e,n,a))},oncreateitem:function(e){if(e){var n=this.diff(e,this.state.currentDate)&&!e.disabled?"btn btn-info active":"btn btn-default",a=e.year+"-"+e.month+"-"+e.day,i={"data-date":a,className:n+(e.month!=this.state.date.getMonth()+1?" gray":""),href:"javascript:;"},s=e.text||e.day;return _.isFunction(this.props.renderItem)&&(s=this.props.renderItem.apply(this.props.calendar,arguments)),e.disabled&&(i.disabled="disabled"),t.createElement("a",t.__spread({},i),s)}return t.createElement("span",{className:"place"})},onselect:function(t,e){return _.isFunction(this.props.select)?this.props.select.apply(this.props.calendar,arguments):void this.props.calendar.setState({date:e,currentDate:e})},diff:function(t,e){function n(t){return t instanceof Date?{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}:t}return t=n(t),e=n(e),t&&e&&t.year==e.year&&t.month==e.month&&t.day==e.day},formatRangeDisabled:function(t){var e,n=this.state.disabled,a=new Date(t.year,t.month-1,t.day);return n&&(e=_.find(n,function(t){return t[0]&&!t[1]?a>=t[0]:t[0]&&t[1]?a>=t[0]&&a<=t[1]:!t[0]&&t[1]?a<=t[1]:!1}),e&&(t.disabled=!0)),t}}),n.Toolbar=t.createClass({displayName:"Toolbar",getDefaultProps:function(){return{}},getInitialState:function(){return{}},componentWillReceiveProps:function(){},render:function(){return t.createElement("div",{className:"calendar-toolbar"},this.createItems())},createItems:function(){var e=[];return this.props.years&&e.push(t.createElement(n.Toolbar.DateTool,t.__spread({},this.props,{ref:"DateTool"}))),this.props.hasToday&&e.push(t.createElement(n.Toolbar.TodayTool,t.__spread({},this.props,{ref:"TodayTool"}))),e}}),n.Toolbar.DateTool=t.createClass({displayName:"DateTool",getDefaultProps:function(){return{years:[1900,2050],currentDate:new Date,select:function(){},format:function(t,e){return e}}},getInitialState:function(){return{yearMenuShow:!1,monthMenuShow:!1}},componentWillMount:function(){this.initParams(this.props)},componentDidMount:function(){this.$hideMenus=$.proxy(this.hideMenus,this),$(document).on("click",this.$hideMenus),$(e.findDOMNode(this.refs.slideYears)).on("click",$.proxy(this.slideYears,this)),$(e.findDOMNode(this.refs.slideMonths)).on("click",$.proxy(this.slideMonths,this))},componentWillUnmount:function(){$(document).off("click",this.$hideMenus)},componentWillReceiveProps:function(t){this.initParams(t)},componentDidUpdate:function(t,e){(!e.yearMenuShow&&this.state.yearMenuShow||!e.monthMenuShow&&this.state.monthMenuShow)&&this.setScroll()},initParams:function(t){this.setState({year:t.date.getFullYear(),month:t.date.getMonth()+1,currentDate:t.currentDate,date:t.date})},setScroll:function(){if(this.isMounted()){var t=this.state.year,n=this.props.years[0],a=26*(t-n-3);a=0>a?0:a,e.findDOMNode(this.refs["year-menu"]).scrollTop=a;var i=this.state.month;a=26*(i-3),a=0>a?0:a,e.findDOMNode(this.refs["month-menu"]).scrollTop=a}},render:function(){return t.createElement("div",{className:"tool"},t.createElement("div",{className:"btn-group"},t.createElement("a",t.__spread({},this.createButtonProps("prevYear")),"<<"),t.createElement("a",t.__spread({},this.createButtonProps("prevMonth")),"<"),t.createElement("div",{className:"btn-group"},t.createElement("a",t.__spread({},this.createButtonProps()),this.format("y",this.state.year)),t.createElement("a",t.__spread({},this.createButtonProps(),{ref:"slideYears"}),t.createElement("i",{className:"caret"})),t.createElement("ul",{className:"dropdown-menu",ref:"year-menu",style:{display:this.state.yearMenuShow?"block":"none"}},this.createYearItems())),t.createElement("div",{className:"btn-group"},t.createElement("a",t.__spread({},this.createButtonProps()),this.format("M",this.state.month)),t.createElement("a",t.__spread({},this.createButtonProps(),{ref:"slideMonths"}),t.createElement("i",{className:"caret"})),t.createElement("ul",{className:"dropdown-menu",ref:"month-menu",style:{display:this.state.monthMenuShow?"block":"none"}},this.createMonthItems())),t.createElement("a",t.__spread({},this.createButtonProps("nextMonth")),">"),t.createElement("a",t.__spread({},this.createButtonProps("nextYear")),">>")))},createButtonProps:function(t){var e,n={href:"javascript:;",className:"btn btn-default"};switch(t){case"prevYear":e=this.state.year<=this.props.years[0]?"disabled":"",_.extend(n,{onClick:e?null:this.prevYear,disabled:e});break;case"prevMonth":e=this.state.year<this.props.years[0]||this.state.year==this.props.years[0]&&1==this.state.month?"disabled":"",_.extend(n,{onClick:e?null:this.prevMonth,disabled:e});break;case"nextYear":e=this.state.year>=this.props.years[1]?"disabled":"",_.extend(n,{onClick:e?null:this.nextYear,disabled:e});break;case"nextMonth":e=this.state.year>this.props.years[1]||this.state.year==this.props.years[1]&&12==this.state.month?"disabled":"",_.extend(n,{onClick:e?null:this.nextMonth,disabled:e})}return n},createYearItems:function(){for(var e,n=this.props.years[0],a=this.props.years[1],i=[],s=(this.state.year,n);a>=s;s++)e={className:s==this.state.year?"active":"","data-year":s,onClick:this.select},i.push(t.createElement("li",t.__spread({},e),t.createElement("a",{href:"javascript:;"},this.format("y",s))));return i},createMonthItems:function(){for(var e=[],n=1;12>=n;n++)e.push(t.createElement("li",{className:n==this.state.month?"active":"","data-month":n,onClick:this.selecte},t.createElement("a",{href:"javascript:;"},this.format("M",n))));return e},slideYears:function(t){t.preventDefault(),t.stopPropagation(),this.setState({yearMenuShow:!this.state.yearMenuShow})},slideMonths:function(t){t.preventDefault(),t.stopPropagation(),this.setState({monthMenuShow:!this.state.monthMenuShow})},hideMenus:function(){this.setState({yearMenuShow:!1,monthMenuShow:!1})},format:function(t,e){return _.isFunction(this.props.format)?this.props.format.apply(this.props.calendar,arguments):e},select:function(t){var e=parseInt($(t.currentTarget).attr("data-month")),n=parseInt($(t.currentTarget).attr("data-year"));e=e||this.state.month,n=n||this.state.year,this.hideMenus(),this._select({year:n,month:e})},_select:function(t){var e=new Date(this.state.date);e.setFullYear(t.year),e.setMonth(t.month-1),this.props.calendar.setState({date:e})},prevYear:function(){this._select(this.addYear(-1))},prevMonth:function(){this._select(this.addMonth(-1))},nextYear:function(){this._select(this.addYear(1))},nextMonth:function(){this._select(this.addMonth(1))},addYear:function(t){var e=this.state.year+t;return e=e<this.props.years[0]?this.props.years[0]:e,e=e>this.props.years[1]?this.props.years[1]:e,{year:e,month:this.state.month}},addMonth:function(t){var e=this.state.month+t,n=this.state.year;return 1>e?(n=this.addYear(-1).year,n<this.state.year?e+=12:e-=t):e>12&&(n=this.addYear(1).year,e-=n>this.state.year?12:t),{year:n,month:e}}}),n.Toolbar.TodayTool=t.createClass({displayName:"TodayTool",getDefaultProps:function(){return{todayText:"返回今日"}},render:function(){return t.createElement("div",{className:"tool"},t.createElement("div",{className:"btn-group"},t.createElement("a",{href:"javascript:;",className:"btn btn-default",onClick:this.prev},this.props.todayText)))},prev:function(){var t=new Date;this.props.calendar.setState({date:t,currentDate:t})}}),n}),define("jsx.UILunarCalendar",["react","react-dom","date-util","jsx.UICalendar"],function(t,e,n,a){var i=t.createClass({displayName:"UILunarCalendar",defaults:function(){return{className:"calendar-holiday",body:{itemFormat:this._itemFormat,renderItem:this._renderItem,select:this._select}}},getDefaultProps:function(){return{}},getInitialState:function(){return{}},componentWillMount:function(){this.initParams(this.props)},componentWillReceiveProps:function(t){this.initParams(t)},render:function(){var e=$.extend(!0,{},this.props,this.defaults());return _.extend(e,this.state),t.createElement(a,t.__spread({},e))},initParams:function(t){this.setState({date:t.date,currentDate:t.currentDate})},_itemFormat:function(t){var e,a,i=new Date(t.year,t.month-1,t.day);try{e=n.getLunarDate(i)}catch(s){}return a=n.getFestival(i),t.lunar=e,t.festival=a,this.props.body&&_.isFunction(this.props.body.itemFormat)&&(t=this.props.body.itemFormat.apply(this,arguments)),t},_renderItem:function(e){if(this.props.body&&_.isFunction(this.props.body.renderItem))return this.props.body.renderItem.apply(this,arguments);var n,a="",i=e.lunar,s=e.festival;if(e.lunar&&(n=1==i.date?i.lunarMonth+"月":i.lunarDate,a=i.gzYear+"年 "+i.gzMonth+"月 "+i.gzDate+"日\n",a=a+i.year+"年 "+i.lunarMonth+"月 "+i.lunarDate),s&&s.length>0){n=s[0].name,a+=a?"\n":"";
for(var r=[],o=0;o<s.length;o++)r.push(s[o].name);a+=r.join(" ")}return n?t.createElement("span",{title:a},e.day,t.createElement("br",null),t.createElement("small",{className:"text-danger"},n)):e.day},_select:function(){_.isFunction(this.props.body.select)&&this.props.body.select.apply(this,arguments)}});return i}),define("jsx.UITree",["react","react-dom"],function(t){var e=t.createClass({displayName:"UITree",getDefaultProps:function(){return{unexpand:function(){},expand:function(){},callback:function(){}}},getInitialState:function(){return{}},componentWillMount:function(){this.initParams(this.props.children)},componentReceiveProps:function(t){this.initParams(t.children)},render:function(){return t.createElement("div",{className:"tree",onClick:this.command},t.createElement("ul",null,this.createItems(this.state.data)))},initParams:function(t){var e=0,n={},a=function(t){return _.map(t,function(t){var i=_.extend({id:++e},t);return t.children&&(i.children=a(t.children)),n[i.id]=i,i})};this.setState({data:a(t),map:n})},createItems:function(t){return _.map(t,$.proxy(function(t){return t.children&&t.children.length>0?this.createLimb(t):this.createLeaf(t)},this))},createLimb:function(e){var n=[],a=e.expand,i=a?"bottom":"right";return n.push(t.createElement("li",{className:"limb"},t.createElement("a",{href:"javascript:;"},t.createElement("i",{className:"glyphicon glyphicon-triangle-"+i,"data-cmd":"expand-"+e.id}),t.createElement("span",{"data-cmd":"link-"+e.id},e.text)),t.createElement("ul",{style:{display:a?"block":"none"}},this.createItems(e.children)))),n},createLeaf:function(e){return t.createElement("li",{className:"leaf"},t.createElement("a",{href:"javascript:;","data-cmd":"link-"+e.id},e.text))},command:function(t){var e,n,a,i,s=$(t.target).attr("data-cmd");if(s)switch(e=s.split("-"),n=e[0],a=e[1],n){case"expand":i=this.expand;break;case"link":i=this.link}i&&i(a)},expand:function(t){var e,n=this.state.map[t];n&&(e=n.expand?"unexpand":"expand",n.expand=!n.expand),this.setState({data:this.state.data}),e&&_.isFunction(this.props[e])&&this.props[e].call(this,n)},link:function(t){var e=this.state.map[t];e&&_.isFunction(this.props.callback)&&this.props.callback.call(this,e)}});return e}),define("ComponentBase",[],function(){var t=_.extend({},Backbone.Event,{initialize:function(t){var e=this.getDefaults();this.options=_.extend({},e,t),this.initialDocumentElement(),this.render()},getDefaults:function(){return{}},initialDocumentElement:function(){this.$el.appendTo($("#components"))},render:function(){},show:function(){},hide:function(){}});return Backbone.View.extend(t)}),define("UIBackdrop",["react","react-dom","jsx.UIBackdrop","ComponentBase"],function(t,e,n,a){return a.extend({getDefaults:function(){return{fade:!0}},render:function(){this.Component=e.render(t.createElement(n,t.__spread({},this.options)),this.$el[0])},show:function(){this.Component.show()},hide:function(){this.Component.hide()}})}),define("Component",["react-dom","UIBackdrop","ComponentBase"],function(t,e,n){return n.extend({getDefaults:function(){return{fade:!0,backdrop:!1,keybord:!1}},render:function(){this.options.backdrop&&(this.backdrop=new e({fade:this.options.fade,click:$.proxy(this.hide,this)}))},show:function(){this.backdrop&&this.backdrop.show()},hide:function(){this.backdrop&&this.backdrop.hide()}})}),define("UILayer",["react","react-dom","jsx.UILayer","Component"],function(t,e,n,a){var $super=a.prototype;return a.extend({initialize:function(){$super.initialize.apply(this,arguments),this._layoutOptions={fade:this.options.fade,onhide:$.proxy(this._onhide,this),onshow:$.proxy(this._onshow,this)}},getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{backdrop:!0,keybord:!0})},render:function(){$super.render.apply(this,arguments),this.Component=e.render(t.createElement(n,t.__spread({},this._layoutOptions),this.createElement()),this.$el[0])},createElement:function(){},show:function(){$super.show.apply(this,arguments),this.Component.show()},hide:function(){$super.hide.apply(this,arguments),this.Component.hide()},_onhide:function(){this.trigger("hidden")},_onshow:function(){this.trigger("shown")}})}),define("UILayerList",["react","react-dom","jsx.UILayerList","Component"],function(t,e,n,a){var $super=a.prototype;return a.extend({initialize:function(t){var e=(t||{}).fade,n=this.getDefaults();e="undefined"==typeof e?n.fade:e,this._layoutOptions={fade:e,onhide:$.proxy(this._onhide,this),onshow:$.proxy(this._onshow,this)},$super.initialize.apply(this,arguments)},getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{backdrop:!0,keybord:!0})},render:function(){$super.render.apply(this,arguments),this.Component=e.render(t.createElement(n,t.__spread({},this._layoutOptions),this.createElement()),this.$el[0])},createElement:function(){},show:function(){$super.show.apply(this,arguments),this.Component.show()},hide:function(){$super.hide.apply(this,arguments),this.Component.hide()},_onhide:function(){this.trigger("hidden")},_onshow:function(){this.trigger("shown")}})}),define("UIHeader",["react","react-dom","ComponentBase","jsx.UIHeader"],function(t,e,n,a){return n.extend({initialDocumentElement:function(){this.$el=$(this.options.render?this.options.render:"#header"),this.el=this.$el[0]},getDefaults:function(){return{render:null,show:!0,title:"",toolbar:[],handles:{}}},render:function(){this.Component=e.render(t.createElement(a,t.__spread({},this.options)),this.$el[0])},show:function(t,e,n){({title:t,toolbar:e||this.options.toolbar||[],handles:_.extend({},this.options.handles,n)});$.extend(!0,this.options,{title:t,toolbar:e,handles:n}),this.render(),this.Component.show(),this.trigger("shown")},hide:function(){this.Component.hide(),this.trigger("hidden")}})}),define("UILoading",["react","react-dom","jsx.UILoading","UILayer"],function(t,e,n,a){var $super=a.prototype;return a.extend({createElement:function(){return t.createElement(n,null,this.options.children)},hide:function(){this.timer&&clearTimeout(this.timer),$super.hide.apply(this,arguments),this.trigger("hidden.loading.component")},show:function(t,e,n){_.isFunction(t)?(n=t,e=0,t=null):t&&!isNaN(t)&&t/1===t?(n=e,e=t,t=null):_.isFunction(e)&&(n=e,e=0),_.extend(this.options,{children:t||"数据加载中"}),this.render(),this.once("hidden.loading.component",n,this),$super.show.call(this),e&&e>0&&(this.timer=setTimeout($.proxy(function(){this.hide()},this),1e3*e))}})}),define("UIAlert",["react","react-dom","UILayer","jsx.UIModal"],function(t,e,n,a){var $super=n.prototype;return n.extend({getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{buttons:[{text:"知道了",handle:$.proxy(this.hide,this)}]})},createElement:function(){return t.createElement(a,t.__spread({},this.options),this.options.children)},hide:function(){$super.hide.apply(this,arguments),this.trigger("hidden.alert.component")},show:function(t,e,n){return t?(_.isFunction(e)&&(n=e,e=null),_.extend(this.options,{children:t,title:e}),this.render(),this.once("hidden.alert.component",n,this),void $super.show.call(this)):this}})}),define("UIConfirm",["react","react-dom","UILayer","jsx.UIModal"],function(t,e,n,a){var $super=n.prototype;return n.extend({getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{buttons:[{text:"确定",handle:$.proxy(this._ok,this)},{text:"取消",handle:$.proxy(this._cancel,this)}]})},createElement:function(){return t.createElement(a,t.__spread({},this.options),this.options.children)},hide:function(){this.off("cancel.confirm.component"),this.off("ok.confirm.component"),$super.hide.apply(this,arguments)},show:function(t,e,n,a){return t?(_.isFunction(e)&&(a=n,n=e,e=null),a=a||this.hide,_.extend(this.options,{children:t,title:e}),this.render(),this.on("cancel.confirm.component",a,this),this.on("ok.confirm.component",n,this),void $super.show.call(this)):this},_ok:function(){this.trigger("ok.confirm.component")},_cancel:function(){this.trigger("cancel.confirm.component")}})}),define("UIToast",["react","react-dom","jsx.UIToast","UILayer"],function(t,e,n,a){var $super=a.prototype;return a.extend({createElement:function(){return t.createElement(n,null,this.options.children)},hide:function(){this.timer&&clearTimeout(this.timer),$super.hide.apply(this,arguments),this.trigger("hidden.toast.component")},show:function(t,e,n){return t?(_.isFunction(e)&&(n=e,e=null),e=e||2,_.extend(this.options,{children:t}),this.render(),this.once("hidden.toast.component",n,this),$super.show.call(this),void(this.timer=setTimeout($.proxy(function(){this.hide()},this),1e3*e))):this}})}),define("UIList",["react","react-dom","UILayerList","jsx.UIList"],function(t,e,n,a){var $super=n.prototype;return n.extend({getDefaults:function(){var t=$super.getDefaults.apply(this,arguments);return _.extend(t,{onselect:$.proxy(this._onselect,this),oncancel:$.proxy(this.hide,this)})},createElement:function(){return t.createElement(a,t.__spread({},this.options),this.options.children)},_onselect:function(t){this.trigger("select",t),this.hide()}})}),define("UISelect",["react","react-dom","jsx.UISelect","UILayerList","jsx.UILayerList"],function(t,e,n,a,i){var $super=a.prototype;return a.extend({getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{onchange:$.proxy(this._onchange,this)})},render:function(){$super.render.apply(this,arguments);var a=t.createClass({displayName:"cls",render:function(){return t.createElement(i,t.__spread({},this.props.layerOptions,{ref:"UILayerList"}),t.createElement(n,t.__spread({},this.props.options,{ref:"UISelect"}),this.props.children))},show:function(){this.refs.UILayerList.show()},hide:function(){this.refs.UILayerList.hide()}});this.Component=e.render(t.createElement(a,{options:this.options,layerOptions:this._layoutOptions},this.options.children),this.$el[0])},createElement:function(){},_onchange:function(t){this.trigger("change",t)},value:function(){return this.Component.refs.UISelect.value()}})}),define("UISelectGroup",["react","react-dom","jsx.UISelectGroup","UILayerList","jsx.UILayerList"],function(t,e,n,a,i){var $super=a.prototype;return a.extend({getDefaults:function(){return _.extend($super.getDefaults.apply(this,arguments),{oncancel:$.proxy(this.hide,this),onchange:$.proxy(this._onchange,this),onitemchange:$.proxy(this._onitemchange,this)})},render:function(){$super.render.apply(this,arguments),this.$el.empty();var a=t.createClass({displayName:"cls",render:function(){return t.createElement(i,t.__spread({},this.props.layerOptions,{ref:"UILayerList"}),t.createElement(n,t.__spread({},this.props.options,{ref:"UISelectGroup"}),this.props.options.children))},show:function(){this.refs.UILayerList.show()},hide:function(){this.refs.UILayerList.hide()}});this.Component=e.render(t.createElement(a,{options:this.options,layerOptions:this._layoutOptions},this.options.children),this.$el[0])},show:function(){return $super.show.apply(this,arguments),this.once("cancel.selectgroup.component",this.render,this),this},hide:function(){return $super.hide.apply(this,arguments),this.trigger("cancel.selectgroup.component"),this},_onchange:function(t,e){this.off("cancel.selectgroup.component"),_.each(e,$.proxy(function(t,e){this.options.children[e]=t},this)),this.trigger("change",t),this.hide()},_onitemchange:function(t,e){this.trigger("itemchange",t,e)},value:function(){return this.Component.refs.UISelectGroup.value()},refresh:function(t,e){var n=$.extend({},this.options,!0),a=this.Component.refs.UISelectGroup.itemsResults;return a[t]=e,n.children=_.extend({},n.children,a),this.Component.setProps({options:n}),this}})});